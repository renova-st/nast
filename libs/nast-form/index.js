!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash/merge"),require("nast/Lib"),require("lodash/get"),require("lodash/set"),require("lodash/each"),require("lodash/reduce"),require("lodash/size")):"function"==typeof define&&define.amd?define(["lodash/merge","nast/Lib","lodash/get","lodash/set","lodash/each","lodash/reduce","lodash/size"],e):"object"==typeof exports?exports["nast-form"]=e(require("lodash/merge"),require("nast/Lib"),require("lodash/get"),require("lodash/set"),require("lodash/each"),require("lodash/reduce"),require("lodash/size")):t["nast-form"]=e(t["lodash/merge"],t["nast/Lib"],t["lodash/get"],t["lodash/set"],t["lodash/each"],t["lodash/reduce"],t["lodash/size"])}(self,(function(t,e,s,r,i,o,f){return function(){"use strict";var n={180:function(t){t.exports=i},566:function(t){t.exports=s},893:function(e){e.exports=t},355:function(t){t.exports=o},82:function(t){t.exports=r},77:function(t){t.exports=f},441:function(t){t.exports=e}},a={};function m(t){var e=a[t];if(void 0!==e)return e.exports;var s=a[t]={exports:{}};return n[t](s,s.exports,m),s.exports}m.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return m.d(e,{a:e}),e},m.d=function(t,e){for(var s in e)m.o(e,s)&&!m.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},m.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},m.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var u={};return function(){m.r(u),m.d(u,{default:function(){return g}});var t=m(893),e=m.n(t),s=m(441),r=m.n(s),i=m(566),o=m.n(i),f=m(82),n=m.n(f),a=m(180),h=m.n(a),l=m(355),d=m.n(l),_=m(77),c=m.n(_),p=t=>({data:()=>({form_inputs:{},form_errors:{},form_initial:{},form_rules:{},form_masks:{},form_masksStatus:{},form_validations:t.validations,form_editable:{}}),computed:{$form(){return{get:this.form_get,set:this.form_set,init:this.form_init,check:this.form_check,reset:this.form_reset,cancel:this.form_cancel,errors:this.form_getErrors,rules:this.form_setRules,masks:this.form_setMasks,getMask:this.form_getMask,maskStatus:this.form_maskStatus,input:this.form_input,editable:this.form_getEditable,edit:this.form_edit,diff:this.form_diff}}},methods:{form_getEditable(t="default"){return this.form_editable[t]},form_edit(t,e="default"){this.$set(this.form_editable,e,void 0!==t?t:!this.form_editable[e])},form_init(t,e=!0,s="default"){this.$set(this.form_editable,s,e),this.$set(this.form_inputs,s,t),this.$set(this.form_initial,s,t)},form_getErrors(t,e="default"){const s=this.form_errors[e]||{};return t?o()(s,t,[])[0]:s},form_get(t,e="default"){return void 0===this.form_inputs[e]?t?"":{}:t?o()(this.form_inputs[e],t):this.form_inputs[e]},form_diff(t="default"){return d()(this.form_inputs[t],((e,s,r)=>(s!==o()(this.form_initial[t],r)&&(e[r]=s),e)),{})},form_set(t,e,s="default"){void 0===this.form_inputs[s]&&(this.form_inputs[s]={});const r={...this.form_inputs[s]};n()(r,t,e),this.$set(this.form_inputs,s,r)},form_setRules(t,e="default"){this.form_rules[e]=t},form_setMasks(t,e="default"){this.form_masks[e]=t},form_getMask(t,e="default"){return void 0===this.form_masks[e]?t?"":{}:t?o()(this.form_masks[e],t):this.form_masks[e]},form_maskStatus(t,e,s="default"){void 0===this.form_masksStatus[s]&&(this.form_masksStatus[s]={});const r={...this.form_masksStatus[s]};n()(r,t,e),this.$set(this.form_masksStatus,s,r)},form_input(e,s="input",r="default"){return t.input(this,e,s,r)},form_reset(t="default"){this.$set(this.form_inputs,t,this.form_initial[t]),this.$set(this.form_errors,t,{})},form_cancel(t="default"){this.form_reset(t),this.form_edit(!1,t)},form_check(t,e="default"){let s;return void 0===this.form_errors[e]&&this.$set(this.form_errors,e,{}),t?(this.$set(this.form_errors[e],t,{}),s=this.form_validate(t,e),s&&this.$nextTick((()=>{this.$set(this.form_errors[e],t,s)}))):(this.$set(this.form_errors,e,{}),s={},h()(this.form_rules[e],((t,r)=>{const i=this.form_validate(r,e);i&&(s[r]=i)})),s&&this.$nextTick((()=>{this.form_errors={...this.form_errors,[e]:s}}))),0===c()(s)},form_validate(t,e){const s=this.form_rules[e]&&o()(this.form_rules[e],t),r=this.form_inputs[e]&&o()(this.form_inputs[e],t);if(!1===(this.form_masksStatus[e]&&o()(this.form_masksStatus[e],t)))return[this.form_getMessage("mask",r)];if(void 0!==s){const t=[];return h()(s,(e=>{const s=e.name?e.name:e,i=e.params?e.params:[],o=this.form_validations[s];o&&(o(r,i)||t.push(this.form_getMessage(s,r,i)))})),t.length?t:null}return null},form_getMessage(e,s,r=[]){let i=e;if(t.messages instanceof Function)i=t.messages(e,r,s);else if(t.messages instanceof Object){let o=t.messages[e];o=o instanceof Function?o(e,r,s):o,o&&(i=o)}return i}}});class g extends(r()){static _defaultConfig={validations:{required:t=>t.length>0,email:t=>-1!==t.indexOf("@"),phone:t=>-1!==t.indexOf("+")},messages:{required:"Поле обязательно для заполнения",email:"Поле должно быть email адресом",phone:"Поле должно быть корректным телефонным номером",between:(t,e,s)=>`Поле должно быть от ${e[0]} до ${e[1]}`},input:(t,e,s)=>({name:e,value:t.$form.get(e,s),input:r=>t.$form.set(e,r,s),danger:t.$form.errors(e,s),text:!t.$form.editable(s)})};static vue(){const t=this._defaultConfig;return{install(s,r){s.mixin(p(e()(t,r)))}}}}}(),u}()}));